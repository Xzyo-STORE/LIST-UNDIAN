<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xzyo Store - Joki Blox Fruit</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <style>
        :root {
            --primary-blue: #0072ff;
            --dark-bg: #0b1220;
            --card-bg: #111a33;
            --text-white: #ffffff;
        }

        * { box-sizing: border-box; font-family: 'Segoe UI', Arial, sans-serif; }
        
        body {
            background: var(--dark-bg);
            color: var(--text-white);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .wrapper { max-width: 1000px; width: 100%; }
        h2 { text-align: center; margin-bottom: 5px; text-transform: uppercase; letter-spacing: 2px; }
        p.subtitle { text-align: center; color: #7cc7ff; margin-bottom: 20px; }

        .btn {
            width: 100%; padding: 15px; border-radius: 12px; border: none; margin-top: 15px;
            background: linear-gradient(90deg, #020617, #0b3c8a, #020617);
            color: white; font-weight: bold; cursor: pointer; transition: all 0.3s ease;
            text-align: center; text-decoration: none; display: block; font-size: 16px;
        }

        .btn:hover { transform: scale(1.03); box-shadow: 0 0 25px rgba(0, 114, 255, 0.8); }

        .container { display: flex; gap: 20px; align-items: flex-start; margin-top: 20px; flex-wrap: wrap; }
        .left-side { flex: 1; min-width: 320px; }
        .right-side { flex: 1.2; min-width: 320px; }

        .card {
            background: var(--card-bg); border: 1px solid rgba(255,255,255,0.1);
            border-radius: 15px; padding: 25px; margin-bottom: 20px;
        }

        input, textarea {
            width: 100%; padding: 12px; border-radius: 8px; border: 1px solid #1e293b;
            margin-top: 10px; background: #0b1220; color: white; outline: none;
        }

        /* --- ANIMASI CEKLIS --- */
        .checkmark-wrapper { width: 100px; height: 100px; margin: 0 auto 20px; display: none; }
        .checkmark-circle, .checkmark-kick { fill: none; stroke: #00ff88; stroke-linecap: round; stroke-dasharray: 200; stroke-dashoffset: 200; }
        .active .checkmark-circle { stroke-width: 3; stroke-dasharray: 166; stroke-dashoffset: 166; animation: drawStroke 0.6s cubic-bezier(0.65, 0, 0.45, 1) forwards; }
        .active .checkmark-kick { stroke-width: 5; stroke-dasharray: 48; stroke-dashoffset: 48; animation: drawStroke 0.3s cubic-bezier(0.65, 0, 0.45, 1) 0.6s forwards; }
        @keyframes drawStroke { 100% { stroke-dashoffset: 0; } }

        /* --- MODAL QRIS --- */
        .modal { display: none; position: fixed; z-index: 999; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); justify-content: center; align-items: center; flex-direction: column; }
        .modal img { max-width: 80%; border-radius: 15px; border: 3px solid var(--primary-blue); }

        /* --- VIP LIST STYLE --- */
        .vip-item { display: flex; justify-content: space-between; align-items: center; padding: 12px; background: rgba(255,255,255,0.03); margin-bottom: 8px; border-radius: 10px; border-left: 4px solid gold; }
        .crown { color: gold; }
        .check-badge { color: #00ff88; }

        .payment-info { background: rgba(0,0,0,0.4); padding: 15px; border-radius: 10px; border: 1px solid #1e293b; margin-top: 15px; font-size: 14px; }
    </style>
</head>
<body>

<div class="wrapper">
    <h2>XZYO STORE - JOKI BF</h2>
    
    <div class="container">
        <div class="left-side">
            <div class="card" id="cardJoki">
                <h3 style="margin:0"><i class="fa-solid fa-gamepad"></i> Form Order Joki</h3>
                <form id="orderForm">
                    <input type="text" id="userRoblox" placeholder="Username Roblox" required>
                    <input type="password" id="passRoblox" placeholder="Password Roblox" required>
                    <textarea id="ketJoki" placeholder="Jenis Joki (Contoh: Level 1500-Max)" required></textarea>
                    <button type="submit" class="btn">KIRIM DATA AKUN</button>
                </form>
                <div id="jokiSuccess" style="display:none; text-align:center; margin-top:20px;">
                    <div class="checkmark-wrapper" id="checkJoki"><svg viewBox="0 0 52 52"><circle class="checkmark-circle" cx="26" cy="26" r="25"/><path class="checkmark-kick" d="M14.1 27.2l7.1 7.2 16.7-16.8"/></svg></div>
                    <p style="color:#00ff88">Data Akun Terkirim le!</p>
                </div>
            </div>

            <div class="card">
                <h3><i class="fa-solid fa-wallet"></i> Metode Pembayaran</h3>
                <div class="payment-info">
                    DANA : <b>089677329404</b><br>
                    GOPAY / OVO : <b>089517154561</b>
                </div>
                <button class="btn" onclick="openQris()" style="background: linear-gradient(90deg, #ec4899, #8b5cf6);">BUKA QRIS LE</button>
                
                <hr style="margin:25px 0; border: 0; border-top: 1px solid #333;">

                <h3 style="color: gold;"><i class="fa-solid fa-user-plus"></i> Isi Data Sultan (List VIP)</h3>
                <p style="font-size: 12px; color: #aaa;">Isi ini setelah kamu transfer biar masuk ranking le!</p>
                <form id="sultanForm">
                    <input type="text" id="namaSultan" placeholder="Nama Panggilan / Asli" required>
                    <input type="number" id="waSultan" placeholder="Nomor WA (08...)" required>
                    <input type="number" id="nominalSultan" placeholder="Nominal Joki (Contoh: 20000)" required>
                    <button type="submit" class="btn">UPDATE LIST VIP</button>
                </form>
            </div>
        </div>

        <div class="right-side">
            <div class="card">
                <h3 style="text-align:center; color: gold;"><i class="fa-solid fa-crown"></i> TOP SULTAN XZYO</h3>
                <div id="vipList">Memuat list...</div>
            </div>
        </div>
    </div>
</div>

<div id="qrisModal" class="modal">
    <img src="1000015332.jpg" alt="QRIS">
    <p style="color: #00ff88; margin-top: 15px; font-weight: bold;">SILAHKAN DI SCAN QRISNYA LEK</p>
    <button class="btn" style="width: 150px;" onclick="closeQris()">TUTUP</button>
</div>

<script>
    // FIREBASE CONFIG
    const firebaseConfig = {
        apiKey: "AIzaSyC6aUjN60bSDE0BLVs3V-yNRYfSsPv0ZV8",
        authDomain: "xzyostore-66448.firebaseapp.com",
        databaseURL: "https://xzyostore-66448-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "xzyostore-66448",
        appId: "1:547146618223:web:978b8956cc0293cfb7449a"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    function openQris() { document.getElementById('qrisModal').style.display = 'flex'; }
    function closeQris() { document.getElementById('qrisModal').style.display = 'none'; }

    // FORM 1: JOKI (Kirim Akun)
    document.getElementById('orderForm').onsubmit = function(e) {
        e.preventDefault();
        // Disini kamu bisa sambungkan ke FormSubmit.co atau Email
        this.style.display = 'none';
        document.getElementById('jokiSuccess').style.display = 'block';
        const check = document.getElementById('checkJoki');
        check.style.display = 'block';
        setTimeout(() => { check.classList.add('active'); }, 100);
    };

    // FORM 2: SULTAN (Update Firebase)
    document.getElementById('sultanForm').onsubmit = function(e) {
        e.preventDefault();
        const nama = document.getElementById('namaSultan').value.trim();
        const wa = document.getElementById('waSultan').value;
        const harga = parseInt(document.getElementById('nominalSultan').value);

        const ref = db.ref('leaderboard/' + nama);
        ref.once('value').then((snap) => {
            const d = snap.val() || { kali: 0, total: 0 };
            ref.update({
                kali: d.kali + 1,
                total: d.total + harga,
                whatsapp: wa
            }).then(() => {
                alert("Data Sultan Berhasil di Update!");
                location.reload();
            });
        });
    };

    // TAMPIL LIST VIP
    db.ref('leaderboard').on('value', (snap) => {
        const container = document.getElementById('vipList');
        const data = snap.val();
        if(!data) return container.innerHTML = "Belum ada sultan le.";
        
        container.innerHTML = "";
        const sorted = Object.keys(data).sort((a,b) => data[b].total - data[a].total);

        sorted.forEach((name, i) => {
            const u = data[name];
            const crown = u.kali >= 5 ? '<span class="crown">ðŸ‘‘</span>' : '';
            const check = u.total >= 100000 ? '<span class="check-badge">âœ…</span>' : '';
            container.innerHTML += `
                <div class="vip-item">
                    <span>${i+1}. <b>${name}</b> ${crown}${check}</span>
                    <span style="color:#00ff88; font-weight:bold;">Rp ${u.total.toLocaleString()}</span>
                </div>`;
        });
    });
</script>
</body>
</html>
